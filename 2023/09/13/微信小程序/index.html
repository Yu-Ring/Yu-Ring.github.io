<!DOCTYPE html><html lang="cn" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>微信小程序 | 洄游</title><meta name="author" content="YuRing"><meta name="copyright" content="YuRing"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="描述">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序">
<meta property="og:url" content="https://yu-ring.github.io/2023/09/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html">
<meta property="og:site_name" content="洄游">
<meta property="og:description" content="描述">
<meta property="og:locale">
<meta property="og:image" content="https://pic-bed-e5v.pages.dev/img/%E7%A5%9E%E5%B7%9E%E6%8A%98%E5%89%9110.JPG">
<meta property="article:published_time" content="2023-09-13T02:44:00.000Z">
<meta property="article:modified_time" content="2023-09-13T02:44:00.000Z">
<meta property="article:author" content="YuRing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic-bed-e5v.pages.dev/img/%E7%A5%9E%E5%B7%9E%E6%8A%98%E5%89%9110.JPG"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Yu-Ring/obsidian/%E5%87%89.GIF"><link rel="canonical" href="https://yu-ring.github.io/2023/09/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '微信小程序',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-13 10:44:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic-bed-e5v.pages.dev/img/头像/Mimikyu.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic-bed-e5v.pages.dev/img/神州折剑10.JPG')"><nav id="nav"><span id="blog-info"><a href="/" title="洄游"><span class="site-name">洄游</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">微信小程序</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-09-13T02:44:00.000Z" title="Created 2023-09-13 10:44:00">2023-09-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-09-13T02:44:00.000Z" title="Updated 2023-09-13 10:44:00">2023-09-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">9.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>37min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="微信小程序"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="项目构成"><a href="#项目构成" class="headerlink" title="项目构成"></a>项目构成</h2><ul>
<li><code>pages</code> 程序的各种页面</li>
<li><code>utils</code> 工具性质模块</li>
<li><code>app.js</code> 小程序项目入口文件</li>
<li><code>app.json</code> 全局配置 <em>静态</em></li>
<li><code>app.wxss</code> 全局样式 <em>类似于类、预设</em></li>
<li><code>project.config.json</code> 项目配置文件</li>
<li><code>sitemap.json</code> 配置小程序及其页面是否允许被微信索引</li>
</ul>
<h4 id="pages构成"><a href="#pages构成" class="headerlink" title="pages构成"></a>pages构成</h4><ul>
<li><code>.js</code> 页面脚本。页面数据，事件处理</li>
<li><code>.json</code> 配置文件。窗口外观表现</li>
<li><code>.wxml</code> 页面模板结构</li>
<li><code>.wxss</code> 页面样式<br>![[Pasted image 20230509220235.png#pic]]<br><strong>.json</strong></li>
<li>app.json：所有的页面路径 窗口外观 界面表现 底部tab<blockquote>
<p>pages 管理各个页面的路径 <em>每次新建pages类型文件夹会自动添加</em> <em>第一个为默认页面</em><br>window 所有页面的背景色文字颜色<br>style 使用组件的版本<br>![[Pasted image 20230509212341.png|300]]</p>
</blockquote>
</li>
<li>project.config.json：<blockquote>
<p>本地设置。对小程序开发工具的个性化配置</p>
</blockquote>
</li>
<li>sitemap.json<blockquote>
<p>页面可否被微信索引，<em>可在project.config.json的checkSiteMap修改是否有索引提示</em></p>
</blockquote>
</li>
<li>.json<blockquote>
<p>单个页面的配置文件，相较于全局的app.json。<em>属性冲突情况下，局部页面属性优先更高。</em></p>
</blockquote>
</li>
</ul>
<p><strong>.wxml</strong><br>格式：<code>&lt;标签 属性&gt; 内容 &lt;/标签&gt;</code></p>
<blockquote>
<p><strong>标签</strong>:  view text image navigator等 <code>&lt;text&gt; ... &lt;/text&gt;</code><br><strong>属性</strong>:  url &#x3D; “…” color &#x3D; “…”等<code>&lt;navigator url = &quot; &quot;&gt; ... &lt;/navigator&gt;</code><br><strong>数据绑定</strong> <br><strong>列表渲染</strong>：wx:for &#x3D; ““</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123;index&#125;&#125;: &#123;&#123;item.message&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>条件渲染</strong>:  wx:if &#x3D; ““</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;length &gt; 5&#125;&#125;&quot;</span>&gt;</span> 1 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123;length &gt; 2&#125;&#125;&quot;</span>&gt;</span> 2 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span> 3 <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>.wxss</strong></p>
<ul>
<li>新增rpx尺寸单位（随不同设备自动调整，无需css的手动像素单位换算rem）</li>
<li>仅支持部分CSS选择器<blockquote>
<p><code>.class 和 #id</code>、<code>element</code> 、<code>并集选择器</code>、<code>后代选择器</code>、<code>::after ::before伪选择器</code></p>
</blockquote>
</li>
</ul>
<p><strong>.js</strong></p>
<ul>
<li>app.js 程序入口文件 <code>app()</code>函数启动整个小程序</li>
<li>页面.js 页面入口文件 <code>page()</code>函数创建并运行页面</li>
<li>.js 功能模块 封装公共 <em>函数和属性</em> 供页面使用</li>
</ul>
<h2 id="宿主环境"><a href="#宿主环境" class="headerlink" title="宿主环境"></a>宿主环境</h2><p><strong>宿主环境</strong>：安卓app宿主环境是安卓，苹果app宿主环境是ios 小程序宿主环境是微信<br><strong>小程序宿主环境提供的内容：</strong></p>
<ul>
<li><p><strong>通信模型</strong></p>
<blockquote>
<p>渲染层：wxml wxss<br>逻辑层：js脚本<br><strong>渲染层——逻辑层通信</strong>：<br><strong>逻辑层——第三方服务器通信</strong>：<br>![[Pasted image 20230509223123.png|400]]</p>
</blockquote>
</li>
<li><p><strong>运行机制</strong></p>
<blockquote>
<p><strong>启动</strong>：代码包下载到本地–解析app.json–执行app.js–渲染首页–启动完成<br><strong>页面渲染</strong>：加载.json–加载.wxml .wxss</p>
</blockquote>
</li>
<li><p><strong>组件</strong></p>
<blockquote>
<p>视图容器、表单组件等</p>
</blockquote>
</li>
<li><p><strong>API</strong></p>
<blockquote>
<p><strong>事件监听类API</strong> on开头，监听事件触发<br><strong>同步API</strong> Sync结尾 可通过函数返回值直接获取 如果直接出错会报异常<br><strong>异步API</strong> request发送网络数据请求，回调函数接收数据</p>
</blockquote>
</li>
</ul>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><ul>
<li><input checked="" disabled="" type="checkbox"> view</li>
<li><input checked="" disabled="" type="checkbox"> scroll-view<blockquote>
<p><code>nth-child()</code>选择器wxss<br><code>scroll-y</code>滚动方向</p>
</blockquote>
</li>
<li><input checked="" disabled="" type="checkbox"> swiper<blockquote>
<p><strong>indicator-dots</strong><br><code>indicator-color=&quot;white&quot;</code> 未激活颜色<br><code>indicator-active color=&quot;red&quot;</code>激活颜色<br><code>autoplay=&quot;true&quot;</code> <code>interval=&quot;3000&quot;</code> 自动播放 播放间隔<br><code>circular=&quot;true&quot;</code> 循环</p>
</blockquote>
</li>
<li><input checked="" disabled="" type="checkbox"> text<blockquote>
<p><code>user-select</code> 是否可选中</p>
</blockquote>
</li>
<li><input checked="" disabled="" type="checkbox"> rich-text<blockquote>
<p><code>nodes=&quot;&lt;h1 style = &#39;color:red;&#39;&gt;&lt;h1&gt;&quot;</code>属性节点把HTML字符串渲染为对应的UI结构</p>
</blockquote>
</li>
<li><input checked="" disabled="" type="checkbox"> button<blockquote>
<p><code>size=&quot;mini&quot;</code> <code>plain = &quot;true&quot;</code> 镂空按钮 <em>app.json的style:v2</em></p>
</blockquote>
</li>
<li><input checked="" disabled="" type="checkbox"> image<blockquote>
<p><strong>mode</strong>值 <em>填充方式</em></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span> = <span class="string">&quot;/images/Mimikyu.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span> = <span class="string">&quot;/images/Mimikyu.jpg&quot;</span> <span class="attr">mode</span> = <span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span> = <span class="string">&quot;/images/Mimikyu.jpg&quot;</span> <span class="attr">mode</span> = <span class="string">&quot;scaleToFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span> = <span class="string">&quot;/images/Mimikyu.jpg&quot;</span> <span class="attr">mode</span> = <span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="WXML语法"><a href="#WXML语法" class="headerlink" title="WXML语法"></a>WXML语法</h2><h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><blockquote>
<p>.js文件中定义：data：<code>&#123; 数据名1：数据 ，数据名2：数据 &#125;</code><br>.wxml中使用 :  Mustache语法 <code>&#123;&#123;数据名&#125;&#125;</code> <code>&#123;&#123;运算&#125;&#125;</code></p>
</blockquote>
<ul>
<li><p>动态绑定内容</p>
</li>
<li><p>动态绑定属性</p>
</li>
<li><p>Mustache中运算</p>
</li>
</ul>
<h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><blockquote>
<p>用户在渲染层产生的行为，反馈到逻辑层进行处理<br>![[Pasted image 20230513154439.png|400]]</p>
</blockquote>
<ul>
<li>tap <blockquote>
<p>触摸click触发，bindtap（bind:tap)</p>
</blockquote>
</li>
<li>input<blockquote>
<p>文本框输入事件，bindinput（bind:input）</p>
</blockquote>
</li>
<li>change<blockquote>
<p>状态改变触发，bindchange（bind:change)</p>
</blockquote>
</li>
</ul>
<p>事件对象evevt的属性</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>string</td>
<td>事件类型</td>
</tr>
<tr>
<td>timeStamp</td>
<td>Integer</td>
<td>page打开到触发所经过的事件ms</td>
</tr>
<tr>
<td>target</td>
<td>Object</td>
<td>触发事件组件的属性值集合</td>
</tr>
<tr>
<td>currentTarget</td>
<td>Object</td>
<td>当前组件的一些属性值集合</td>
</tr>
<tr>
<td>detail</td>
<td>Object</td>
<td>额外的信息</td>
</tr>
<tr>
<td>touches</td>
<td>Array</td>
<td>触摸事件，停留触摸点信息的数组</td>
</tr>
<tr>
<td>changedTouches</td>
<td>Array</td>
<td>触摸事件，当前变化的触摸点信息的数组</td>
</tr>
<tr>
<td><strong>target与currentTarget</strong>：target是触发事件的源头组件，currenttarget是当前事件绑定的组件</td>
<td></td>
<td></td>
</tr>
<tr>
<td>![[Pasted image 20230513164916.png]]</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>bindtap打印实例<blockquote>
<p><code>&lt;button type=&quot;primary&quot; bindtap = &quot;事件函数&quot;&gt;按钮&lt;/button&gt;</code></p>
</blockquote>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span> = <span class="string">&quot;btnTapHandler&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">btnTapHandler</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e) <span class="comment">// 打印参数对象到console控制台</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>![[Pasted image 20230513192709.png]]</p>
<ul>
<li><p><strong>事件处理函数中修改数据</strong><br>通过调用<code>this.setData(dataObject)</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span> = <span class="string">&quot;changeCount1&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">changeCount1</span>(<span class="params"></span>)&#123;<span class="comment">//前面data中已有count1，否则自动新建</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">count1</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count1</span> + <span class="number">1</span>&#125;)  <span class="comment">//给count1赋新值 </span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>![[Pasted image 20230513194630.png|400]]<br>![[Pasted image 20230513194601.png|400]]</p>
</li>
<li><p>事件传参</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">btnTap2</span>(<span class="params">e</span>)&#123;<span class="comment">//前面data中已有count1，否则自动新建</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e)<span class="comment">// 在console打印e相关信息</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">count1</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count1</span> + e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">varx</span>&#125;) </span><br><span class="line">    <span class="comment">//count1自增+2</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnTap2&quot;</span> <span class="attr">data-varx</span>=<span class="string">&quot;&#123;&#123;2&#125;&#125;&quot;</span>&gt;</span>+2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><ul>
<li><p><code>wx:if</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span> = <span class="string">&quot;&#123;&#123;condition === 1&#125;&#125;&quot;</span>&gt;</span>情况一渲染<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span> = <span class="string">&quot;&#123;&#123;condition === 2&#125;&#125;&quot;</span>&gt;</span>情况二渲染<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>其他情况<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>block</code>标签包裹 控制多个组件的展示与隐藏</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>用<code>view</code>标签也可以包裹，但会该标签本身会被渲染出来，而<code>block</code>不会被渲染。<br>具体表现形式为，在调试器的“审查”箭头 指向被包裹的组件时，前者识别大的view，后者识别内部组件。</p>
</blockquote>
</li>
<li><p><code>hidden</code>控制元素的隐藏与显示<br>条件为<code>true</code>隐藏；条件为<code>false</code>显示</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span> = <span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span>&gt;</span>1隐藏<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span> = <span class="string">&quot;&#123;&#123;false&#125;&#125;&quot;</span>&gt;</span>2不隐藏<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>hidden</code> 与 <code>wx:if</code> 对比：<br>前者以切换<code>display:none/block</code>的样式切换，只能识别true和false；<br>后者要动态创建和移除元素样式。<br><strong>如果频繁进行切换，使用<code>hidden</code>；如果控制比较复杂，使用<code>wx:if</code></strong></p>
</blockquote>
</li>
</ul>
<h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><ul>
<li><p><code>wx:for</code> 循环渲染数组</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">	索引为：&#123;&#123;index&#125;&#125;，当前项：&#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>wx:for-index</code> 和 <code>wx:for-item</code> 替代索引及其变量名</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;array&#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;idx&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;itemName&quot;</span>&gt;</span></span><br><span class="line">	索引为：&#123;&#123;idx&#125;&#125;，当前项：&#123;&#123;itemName&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>wx:key</code> 循环时通过对象数组内某个属性作为key值进行渲染</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">list</span>:[</span><br><span class="line">	&#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">itmName</span>:<span class="string">&quot;xxx&quot;</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">itmName</span>:<span class="string">&quot;yyy&quot;</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">itmName</span>:<span class="string">&quot;zzz&quot;</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通过key值渲染</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>&#123;&#123;itmName&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="WXSS语法"><a href="#WXSS语法" class="headerlink" title="WXSS语法"></a>WXSS语法</h2><h3 id="小程序长度单位rpx"><a href="#小程序长度单位rpx" class="headerlink" title="小程序长度单位rpx"></a>小程序长度单位rpx</h3><p>所有设备的屏幕宽度上等分成750份，每份长度叫做<code>rpx</code></p>
<h3 id="样式导入"><a href="#样式导入" class="headerlink" title="样式导入"></a>样式导入</h3><blockquote>
<p>建立一个common文件夹，建立<code>common.css</code>，并在其中写可能用到的公共样式表<br>在各个页面的wxss中通过<code>@import &quot;/common/common.wxss&quot;;</code>后，该页面的wxml中可以使用对应class</p>
</blockquote>
<h2 id="全局与页面配置"><a href="#全局与页面配置" class="headerlink" title="全局与页面配置"></a>全局与页面配置</h2><h3 id="全局样式与局部样式"><a href="#全局样式与局部样式" class="headerlink" title="全局样式与局部样式"></a>全局样式与局部样式</h3><ul>
<li><code>app.wxss</code> 全局样式 影响到所有页面 优先级比局部低</li>
<li><code>???.wxss</code> 局部样式 只影响当前页面 优先级更高<blockquote>
<p>注：实际全局样式中有些指定范围更精准（也称<strong>权重</strong>更大）可以覆盖局部样式<br>比如全局样式中<code>view:nth-child(1)</code> 指定第一个使用view组件的标签 比 局部样式直接定义<code>view</code>的权重要大。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">view&#123;</span><br><span class="line">	<span class="attribute">padding</span>:<span class="number">10</span>rpx;</span><br><span class="line">	<span class="attribute">margin</span>:<span class="number">10</span>rpx;</span><br><span class="line">	<span class="attribute">background-color</span>:lightskyblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">view<span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)&#123;</span><br><span class="line">	<span class="attribute">background-color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="全局配置-app-json"><a href="#全局配置-app-json" class="headerlink" title="全局配置 app.json"></a>全局配置 <code>app.json</code></h3><h4 id="pages-页面路径"><a href="#pages-页面路径" class="headerlink" title="pages 页面路径"></a>pages 页面路径</h4><h4 id="window-小程序窗口外观"><a href="#window-小程序窗口外观" class="headerlink" title="window 小程序窗口外观"></a>window 小程序窗口外观</h4><p>![[Pasted image 20230703203007.png|400]]<br>控制代码：![[Pasted image 20230703204131.png]]</p>
<blockquote>
<p><strong>全局开启下拉刷新功能</strong>: 需要在window中新增<code>&quot;enablePullDownRefresh&quot;: true&quot;</code><br><strong>下拉刷新背景色</strong>：<code>&quot;backgroundColor&quot;:#十六进制颜色值</code><br><strong>下拉loading样式</strong>：<code>&quot;backgroundTextStyle&quot;: &quot;dark&quot;</code></p>
</blockquote>
<blockquote>
<p><strong>上拉触底</strong>：<code>&quot;onReachBottomDistance&quot;: 50</code>，默认为50</p>
</blockquote>
<h4 id="tabBar-小程序底部tabBar效果"><a href="#tabBar-小程序底部tabBar效果" class="headerlink" title="tabBar 小程序底部tabBar效果"></a>tabBar 小程序底部tabBar效果</h4><ul>
<li>tabBar各配置参数对应渲染效果图<br>![[Pasted image 20230704201906.png|500]]<blockquote>
<p>在<code>app.json</code>中与<code>window</code> 和 <code>pages</code>同级新建一个<code>tabBar</code> 。<br>增加配置项。![[Pasted image 20230704202250.png|500]]<br><code>list</code>为必选，以下为list中每个对象的配置![[Pasted image 20230704202044.png|500]]</p>
</blockquote>
</li>
</ul>
<h5 id="具体演示"><a href="#具体演示" class="headerlink" title="具体演示"></a>具体演示</h5><ul>
<li>代码<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/代办买药 (1).png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/代办买药.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/demo/demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/全程陪诊 (1).png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/全程陪诊.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/wxml_language/wxml_language&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wxml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/代办问诊 (1).png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/代办问诊.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
渲染结果如下<br>![[Pasted image 20230704210519.png|300]]</li>
</ul>
<h4 id="style-是否启用新版组件效果"><a href="#style-是否启用新版组件效果" class="headerlink" title="style 是否启用新版组件效果"></a>style 是否启用新版组件效果</h4><h3 id="页面配置-json"><a href="#页面配置-json" class="headerlink" title="页面配置 ???.json"></a>页面配置 <code>???.json</code></h3><blockquote>
<p>页面配置优先级比全局配置高<br>![[Pasted image 20230704211653.png|500]]</p>
</blockquote>
<h4 id="具体演示-1"><a href="#具体演示-1" class="headerlink" title="具体演示"></a>具体演示</h4><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;列表页面&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#D4F2E7&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#B0C4DE&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>![[Pasted image 20230704213718.png|300]]</p>
<h2 id="数据请求"><a href="#数据请求" class="headerlink" title="数据请求"></a>数据请求</h2><h4 id="配置合法域名"><a href="#配置合法域名" class="headerlink" title="配置合法域名"></a>配置合法域名</h4><blockquote>
<p>微信小程序 只能请求<strong>https类型接口</strong>，且必须把接口的<strong>域名添加到信任列表</strong>中![[Pasted image 20230704214033.png|300]]<br>登录小程序管理后台&gt;配置服务器域名![[Pasted image 20230705204947.png]]</p>
</blockquote>
<h4 id="发起GET请求"><a href="#发起GET请求" class="headerlink" title="发起GET请求"></a>发起GET请求</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;https://escook.cn/api/get&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123; <span class="comment">//请求成功的数据以参数res返回，=&gt;指向处理res的回调函数</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)<span class="comment">//“&#123;&#125;”内处理res</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="发起POST请求"><a href="#发起POST请求" class="headerlink" title="发起POST请求"></a>发起POST请求</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">postInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/api/get&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;ls&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">33</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="加载页面时请求"><a href="#加载页面时请求" class="headerlink" title="加载页面时请求"></a>加载页面时请求</h4><p><code>onLoad</code>函数中调用<code>this.getXXXXX</code>使得本页面的实例申请</p>
<h4 id="跳过reques合法域名校验"><a href="#跳过reques合法域名校验" class="headerlink" title="跳过reques合法域名校验"></a>跳过reques合法域名校验</h4><blockquote>
<p>对于后端未能提供https的接口，可以在小程序右上角&gt;详情&gt;本地设置&gt;勾选<code>不校验合法域名</code><br>仅能在开发和调试阶段使用，正式上线不可使用</p>
</blockquote>
<h4 id="关于回调函数"><a href="#关于回调函数" class="headerlink" title="关于回调函数"></a>关于回调函数</h4><blockquote>
<p>回调函数允许我们在执行某个任务时，将<strong>一个函数作为参数</strong>传递给另一个函数，<strong>在任务完成后再调用这个函数</strong>，以完成进一步的处理。<br>常用于异步编程中，当我们需要在异步操作完成后执行某些操作时，可以将这些操作封装在回调函数中，并将回调函数作为参数传递给异步函数，等异步操作完成后再执行回调函数。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://example.com&#x27;</span>,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面的代码中，我们将一个对象作为参数传递给 <code>wx.request</code>，对象中包含 <code>success</code> 和 <code>fail</code> 两个回调函数。当异步操作完成后，如果成功，将调用 <code>success</code> 函数，并将结果作为参数传递给它；如果失败，将调用 <code>fail</code> 函数，并将错误信息作为参数传递给它。<br>由于网络请求是一个异步操作，在<strong>发起请求后，程序会立即执行后续的语句</strong>，而不会等待请求完成。当请求完成后，<strong>如果请求成功，将调用 <code>success</code> 回调函数</strong>，并将包含响应内容的 <code>res</code> 对象作为参数传递给它；<strong>如果请求失败，将调用 <code>fail</code> 回调函数</strong>，并将错误信息作为参数传递给它。因此，**<code>success</code> 和 <code>fail</code> 函数的执行将<em>被延迟到网络请求完成后</em>**，它们的执行顺序也与代码的书写顺序无关，这就是异步编程的体现。</p>
</blockquote>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h2 id="运营数据"><a href="#运营数据" class="headerlink" title="运营数据"></a>运营数据</h2><ul>
<li>小程序后台</li>
<li>小程序数据助手</li>
</ul>
<h2 id="案例实操1"><a href="#案例实操1" class="headerlink" title="案例实操1"></a>案例实操1</h2><h4 id="准备部分"><a href="#准备部分" class="headerlink" title="准备部分"></a>准备部分</h4><ul>
<li><p>创建小程序</p>
</li>
<li><p><code>app.json</code> 中配置需要的页面</p>
</li>
<li><p><code>app.json</code> 中修改window配置参数</p>
</li>
<li><p><code>app.json</code> 中增加tabBar</p>
</li>
<li><p>页面js设置data</p>
</li>
<li><p>页面js设置函数getXXX</p>
</li>
<li><p>页面js设置onLoad函数并用this.getXXX调用</p>
</li>
</ul>
<h4 id="轮播图实操"><a href="#轮播图实操" class="headerlink" title="轮播图实操"></a>轮播图实操</h4><h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ul>
<li>js文件下，data内定义一个轮播图列表<br><code>swiperList: []</code></li>
<li>js文件下，定义<code>getSwiperList()</code>获取轮播图函数<blockquote>
<p><code>wx.request(&#123;url:&#39;xxx&#39;,method:&#39;xxx&#39;,success:(res)=&gt;&#123;处理返回数据的回调函数&#125;&#125;)</code></p>
</blockquote>
</li>
<li>js文件下，<code>onLoad()</code>调用<code>getSwiperList()</code></li>
<li>wxml文件下，代码嵌套<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.image&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><p>![[Pasted image 20230727210842.png|600]]</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 是否显示面板指示点，指示点颜色：rgba(r,g,b,透明度 0.x一般省略0) --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 当前显示点颜色，是否自动播放，当前滑块所在index：1 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">indicator-dots</span> = <span class="string">&quot;&#123;&#123;swiperdot&#125;&#125;&quot;</span> <span class="attr">indicator-color</span> = <span class="string">&quot;rgba(255,0,0,.3)&quot;</span> <span class="attr">indicator-active-color</span> = <span class="string">&quot;#000080&quot;</span> <span class="attr">autoplay</span> = <span class="string">&quot;true&quot;</span> <span class="attr">current</span>=<span class="string">&quot;1&quot;</span> <span class="attr">circular</span>=<span class="string">&quot;true&quot;</span> <span class="attr">next-margin</span> = <span class="string">&quot;60rpx&quot;</span>  <span class="attr">previous-margin</span>=<span class="string">&quot;60rpx&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;imageList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;this&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; justify-content: space-around;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span> = <span class="string">&quot;&#123;&#123;item&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="导航实操"><a href="#导航实操" class="headerlink" title="导航实操"></a>导航实操</h4><h5 id="页面导航"><a href="#页面导航" class="headerlink" title="页面导航"></a>页面导航</h5><ul>
<li>声明式导航 <code>navigator</code>组件<blockquote>
<p>导航到tabBar页面，需要制定<code>url:/开头</code>和<code>open-type:switchTab</code><br>导航到非tabBar页面，同上，但<code>open-type:navigate</code>（可省略）<br>后退导航，<code>open-type:navigateback</code>，返回步长<code>delta=返回次数</code>（可省略默认1）</p>
</blockquote>
</li>
<li>编程式导航 调用小程序API<code>wx.switchXXX</code><blockquote>
<p>导航到tabBar页面，组件通过<code>bindTap</code>事件绑定属性，触发事件函数，事件函数内写<code>wx.switchXXX(&#123;url:&#39;xxx&#39;&#125;)</code><br>导航到非tabBar页面，同上，<code>wx.navigateTo(&#123;url:&#39;xxx&#39;&#125;)</code><br>后退导航，同上，<code>wx.navigateBack(&#123;url:&#39;xxx&#39;&#125;)</code> 返回步长<code>delta=返回次数</code><br><strong>额外可选属性</strong><code>success fail complete</code>回调函数</p>
</blockquote>
</li>
</ul>
<h5 id="导航传参"><a href="#导航传参" class="headerlink" title="导航传参"></a>导航传参</h5><ul>
<li>声明式和编程式导航<blockquote>
<p><code>url</code>内，跟在路径后用<code>?</code>分割，参数键与参数值<code>=</code>相连，多个参数<code>&amp;</code>分隔</p>
</blockquote>
</li>
<li><code>onLoad</code>接收导航参数<blockquote>
<p><code>onLoad:function(options)&#123;对options对象操作&#125;</code> <em>一般会在data全局定义一个query对象，再在{}中复制options对象</em></p>
</blockquote>
</li>
<li>传参更改页面标题<blockquote>
<p>在生命周期<code>onReady</code>更改，<code>wx.setNavigationBarTitle(&#123;title:&#39;xxx&#39;&#125;)</code>,<em>title参数需要全局定义变量复制options对象</em></p>
</blockquote>
</li>
</ul>
<h4 id="上拉与下拉"><a href="#上拉与下拉" class="headerlink" title="上拉与下拉"></a>上拉与下拉</h4><h5 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h5><ul>
<li>全局开启<blockquote>
<p><code>app.json</code>的window中，令<code>&quot;enablePullDownRefresh&quot;:true</code></p>
</blockquote>
</li>
<li>局部开启<blockquote>
<p><code>???.json</code>，令<code>&quot;enablePullDownRefresh&quot;:true</code></p>
</blockquote>
</li>
<li>下拉刷新窗口样式<blockquote>
<p><code>backgroundColor</code>、<code>backgroundTextStyle</code> </p>
</blockquote>
</li>
<li>监听页面下拉刷新事件<blockquote>
<p>通过<code>onPullDownRefresh:function()&#123;this.处理事件&#125;</code></p>
</blockquote>
</li>
<li>事件处理完毕后主动停止下拉刷新事件<blockquote>
<p>下拉刷新不会主动停止，在function结尾处添加<code>wx.stopPullDownRefresh()</code>即可</p>
</blockquote>
</li>
</ul>
<h5 id="上拉触底"><a href="#上拉触底" class="headerlink" title="上拉触底"></a>上拉触底</h5><ul>
<li>监听页面上拉触顶事件<blockquote>
<p>通过<code>onReachBottom()&#123;this.处理事件&#125;</code></p>
</blockquote>
</li>
<li>上拉触底距离<blockquote>
<p>触发事件时，距离底部的距离，可在<code>???.json</code>中配置<code>onReachBottomDistance()</code>，默认50px</p>
</blockquote>
</li>
<li>loading提示框<blockquote>
<p><code>wx.hideLoading()</code> <code>wx.showLoading(&#123;显示的文字&#125;)</code></p>
</blockquote>
</li>
<li>节流（loading期间拒绝新的请求）<blockquote>
<p>data中定义<code>isloading</code>的节流阈 <code>true &amp; false</code><br>监听处理事件中 开始：<code>isloading:true</code>；complete回调函数结束： <code>isloading:false</code><br>监听触发事件中 <code>onReachBottom()&#123;&#125;</code>判断<code>isloading</code>的值</p>
</blockquote>
</li>
</ul>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><ul>
<li>生命周期概念</li>
<li>生命周期分类<blockquote>
<p>应用生命周期（启动-运行-销毁），页面生命周期（加载-渲染-销毁）</p>
</blockquote>
</li>
<li>生命周期函数<blockquote>
<p>概念：小程序框架内置函数，伴随生命周期，自动按次序执行。<br>作用：运行程序员在特定的生命周期的事件点，执行操作。</p>
</blockquote>
</li>
<li>应用生命周期函数<blockquote>
<p><code>app.js</code>中，有<br><code>onLaunch:function(options)&#123;&#125;</code>初始化完成时，全局只触发一次<br><code>onShow:function(options)&#123;&#125;</code>小程序启动时or从后台进入前台时<br><code>on:function(options)&#123;&#125;</code>从前台进入后台时<br>![[Pasted image 20230730003012.png|250]]<br><em>输入app第三个选项可以自动创建完整生命周期函数</em></p>
</blockquote>
</li>
<li>页面生命周期函数<blockquote>
<p><code>???.js</code>中，<code>onLoad(仅1) onShow onReady(渲染完成 仅1) onHide onUnload(仅1)</code></p>
</blockquote>
</li>
</ul>
<h2 id="WXS脚本"><a href="#WXS脚本" class="headerlink" title="WXS脚本"></a>WXS脚本</h2><h4 id="WXS概念"><a href="#WXS概念" class="headerlink" title="WXS概念"></a>WXS概念</h4><p>结合wxml构建页面的结构，用于渲染页面结构</p>
<blockquote>
<p>wxml无法直接调用js定义的函数，但可以调用wxs函数。<em>过滤器</em></p>
</blockquote>
<ul>
<li>语法<blockquote>
<p>数据类型：类似JS，<br>语法形式：<br>不支持<code>let const 解构赋值 展开运算符 箭头函数 对象属性简写</code> ES6以上<br>支持<code>var function</code> ES5语法<br>CommonJS规范：</p>
<ol>
<li>模块引用（<code>require()</code> 方法）：用于在一个模块中引用另一个模块。</li>
<li>模块定义（<code>module.exports</code> 或 <code>exports</code> 对象）：用于定义模块中的函数、变量或对象，并将其导出到其他模块中。  </li>
<li>模块标识符（<code>module.id</code> 属性）：用于唯一标识一个模块，以便在其他模块中引用和调用。  </li>
<li>模块循环依赖（<code>require()</code> 方法缓存机制）：用于解决模块之间的循环依赖问题，避免模块引用和导出出现死循环。</li>
</ol>
</blockquote>
</li>
</ul>
<h4 id="WXS-基本语法"><a href="#WXS-基本语法" class="headerlink" title="WXS 基本语法"></a>WXS 基本语法</h4><ul>
<li>内嵌wxs脚本<blockquote>
<p>在wxml通过<code>&lt;wxs&gt;</code>标签实现<br>每个<code>&lt;wxs&gt;&lt;/wxs&gt;</code> 必须提供<code>module</code>属性来命名wxs模块，wxml通过名称访问对应模块成员</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;m1.toUpper(userName)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- userName在js中定义--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">module</span>=<span class="string">&quot;m1&quot;</span>&gt;</span></span><br><span class="line">	module.exports.toUpper = function(str)&#123;</span><br><span class="line">		return str.toUpperCase()</span><br><span class="line">	&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- module.exports.toUpper使函数导出，使之向外共享可被调用或引用 --&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>外联wxs脚本<blockquote>
<p>代码编写在<code>???.wxs</code>文件中，<em>放utils文件下</em>。<br>引入时，<code>&lt;wxs src=&quot;路径&quot; module=&quot;命名&quot;&gt;&lt;/wxs&gt;</code></p>
</blockquote>
</li>
<li>使用特点<blockquote>
<p><code>过滤器</code>，用于<code>Mustache</code>；<br>不可用于<code>回调函数</code>，如<code>&lt;button bindtap=&quot;xxx&quot;&gt;???&lt;/button&gt;</code><br>无法调用小程序api和js函数<br>ios设备上性能比js快</p>
</blockquote>
</li>
</ul>
<h2 id="案例实操2"><a href="#案例实操2" class="headerlink" title="案例实操2"></a>案例实操2</h2><h4 id="动态请求"><a href="#动态请求" class="headerlink" title="动态请求"></a>动态请求</h4><ul>
<li>普通的请求url是静态的，编写完直接决定。根据需要动态请求<code>wx.request</code> ,url中在对应需要请求的参数用<code>&amp;&#123;this.data.???&#125;</code>替代来动态请求。</li>
</ul>
<h4 id="页面加载"><a href="#页面加载" class="headerlink" title="页面加载"></a>页面加载</h4><ul>
<li>判断页面加载完成。<code>if(page*pageSize &gt;= total) return wx.showToast(&#123;title:&quot;加载完毕&quot;，icon:&#39;none&#39;&#125;)</code></li>
<li>页面刷新时，重置<code>page</code> <code>total</code> <code>list</code> 等数据</li>
</ul>
<h4 id="WXS处理格式-手机号"><a href="#WXS处理格式-手机号" class="headerlink" title="WXS处理格式 手机号"></a>WXS处理格式 手机号</h4><ul>
<li>在wxs中通过，<code>var arr=str.split</code>以及<code>arr.splice(位置，删除个数，插入元素)</code></li>
</ul>
<h2 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2><ul>
<li>组件的创建<blockquote>
<p>与页面同级别，创建法类似。创建完成要在app.json建立联系</p>
</blockquote>
</li>
<li>引用组件<blockquote>
<p>全局引用：<code>app.json</code>的<code>usingComponents&#123;&quot;组件名&quot;:&quot;/组件路径&quot;&#125;</code><br>局部引用：<code>xxx.json</code>的<code>usingComponents&#123;&quot;组件名&quot;:&quot;/组件路径&quot;&#125;</code></p>
</blockquote>
</li>
<li>组件与页面区别<blockquote>
<p>组件的json文件要申明<code>&quot;component&quot;:true</code><br>组件的js文件要调用<code>Component()</code><br>组件的事件处理写在<code>method:&#123;&#125;</code>结点中</p>
</blockquote>
</li>
<li><strong>组件样式的隔离</strong><blockquote>
<p>组件样式的隔离性：只对当前组件生效，对外部UI结构无影响<br>全局样式<code>app.wxss</code>对组件样式无效<br>选择器：class有隔离效果；id、属性、标签选择器无样式隔离；<strong>组件和引用组件用class选择器</strong></p>
</blockquote>
</li>
<li><strong>修改组件样式的隔离选项</strong><blockquote>
<p>法一:组件Js文件的options对象中<code>Component(&#123;options:&#123;styleIsolation:&#39;isolated&#39;&#125;&#125;)</code><br>法二:组件Json文件增加<code>&#123;&quot;styleIsolation&quot;:&quot;isolated&quot;&#125;</code><br><code>isolated</code>隔离 默认<br><code>apply-shared</code>受页面的wxss影响；组件样式不影响页面<br><code>shared</code>受页面的wxss影响；组件样式影响页面、非isolated组件</p>
</blockquote>
</li>
<li>自定义组件data数据<blockquote>
<p>data是组件内部私有数据，相较之下properties是外部给组件的数据。本质指向同一个对象</p>
</blockquote>
</li>
<li>自定义组件method方法<blockquote>
<p>规范：自定义方法用下划线开头</p>
</blockquote>
</li>
<li>自定义组件properties属性<blockquote>
<p>类似于button有bindtap，color等属性，组件属性properties可以接收外界传递到组件的数据<br>定义：在Js文件<code>Component(&#123;properties:&#123;...&#125;&#125;)</code>内部对象</p>
<blockquote>
<p>完整定义：<code>属性名:&#123;type:属性数据类型,Number:属性默认值&#125;</code><br>简便定义：<code>属性名：属性数据类型</code></p>
</blockquote>
</blockquote>
</li>
<li><strong>数据监听器observers</strong><blockquote>
<p>监听组件内属性和数据变化，启用处理函数<br>定义：在Js文件<code>Component(&#123;observers:&#123;...&#125;&#125;)</code>内部对象<br><code>&#39;n1,n2&#39;:function(newN1,newN2)&#123;this.setData(&#123;sum:newN1+newN2&#125;)&#125;</code><br>当监听对象属性时<code>n1=A.a n2=A.b</code> a改变；b改变；A改变 都会触发function<br>监听某个对象所有属性：通配符<code>**</code><br>e.g <code>&#39;A.**&#39;:function(obj)&#123;this.setData(&#123;操作obj.a,obj.b等&#125;)&#125;</code><br>技巧：<code>$&#123;&#125;</code>用来拼接字符串 e.g<code>&quot;he$&#123;ll&#125;o&quot; = &quot;hello&quot;</code></p>
</blockquote>
</li>
<li><strong>纯数据字段</strong><blockquote>
<p>不用于界面渲染的data字段，应用于不展示在界面以及组件传递。提升页面更新性能<br>使用：Js文件 <code>Component(&#123;options:&#123;...&#125;&#125;)</code> 中指定<code>pureDataPattern:正则表达式</code><br>e.g: <code>/^_/</code>以下划线开头的变量 <code>_a _b等</code>只能用于页面逻辑处理，提高性能</p>
</blockquote>
</li>
</ul>
<h2 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h2><p>![[Pasted image 20230803005759.png]]</p>
<blockquote>
<p><code>created</code>: 组件数据还未初始化，无法调用setData函数。只能添加一些自定义属性字段<br><code>attached</code>: 添加到页面节点树中，组件数据已经初始化，可以调用setData函数更新组件数据。<br><code>detached</code>: 组件被从页面节点树中移除，进行清洗性质工作。</p>
</blockquote>
<ul>
<li>定义：<code>lifetime</code>节点<br>![[Pasted image 20230803011306.png|500]]</li>
<li>组件所在页面的生命周期 <code>pageLifetimes</code>节点<blockquote>
<p>组件需要监听页面状态变化进行事件处理时，需要用到该页面的生命周期。<br><code>show</code>: 组件所在页面<strong>展示时</strong>执行<br><code>hide</code>: 组件所在页面<strong>隐藏时</strong>执行<br><code>resize</code>: 组件所在页面<strong>尺寸变化时</strong>执行<br>![[Pasted image 20230803012434.png|500]]<br>案例：页面出现时生成随机RGB颜色</p>
<blockquote>
<p><code>component(&#123;...&#125;)</code>下  method:{定义<code>_randomColor()&#123; this.setData &#125;</code>}<br><code>component(&#123;...&#125;)</code>下  pageLifetimes:{<code>show: function()&#123; 调用this.randomColor() &#125;</code>}<br>先在method中定义事件处理函数<br>再到pageLifetimes节点下对应页面生命周期函数下function调用<br>![[Pasted image 20230803013531.png|500]]![[Pasted image 20230803013559.png|500]]</p>
</blockquote>
</blockquote>
</li>
</ul>
<h2 id="自定义组件插槽"><a href="#自定义组件插槽" class="headerlink" title="自定义组件插槽"></a>自定义组件插槽</h2><blockquote>
<p>允许在组件内部定义一些占位符，以便开发者在使用组件时动态地传入一些内容。一个组件可包含多个插槽，每个插槽使用 <code>&lt;slot&gt;</code> 标签来定义。<br>代码顺序：自定义组件内封装好slot，页面使用时按照slot格式(<em>可以不填</em>)写需要传入的内容<br>渲染顺序：把页面代码要传入的内容替换组件的slot，然后再渲染组件<br>![[Pasted image 20230803014712.png|500]]</p>
</blockquote>
<ul>
<li>案例理解<br>自定义组件<code>my-component</code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
调用<code>my-component</code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span>&gt;</span>这是组件的头部<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>这是组件的内容<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>定义<code>my-component</code> 的自定义组件，包含两个插槽：<code>header</code> 和默认插槽。其中，<code>header</code> 插槽使用 <code>name</code> 属性来指定插槽的名称，而默认插槽不需要指定名称。<br>使用时，<code>&lt;my-component&gt;</code> 标签包含了两个 <code>&lt;text&gt;</code> 节点，其中第一个节点传入了 <code>header</code> 插槽，第二个节点填充了默认插槽。</p>
</blockquote>
</li>
<li>插槽使用<blockquote>
<p>默认只能使用单个插槽，自定义组件有写slot也可以选择不传入。<br>启用多个插槽：组件Js &#x3D;&gt; Component &#x3D;&gt; options &#x3D;&gt; <code>multipleSlots：true</code><br>定义多个插槽：封装时通过<code>name</code>区分不同插槽；使用时节点额外增加一个属性<code>slot=name</code>指定。</p>
</blockquote>
</li>
</ul>
<p><code>my-component:</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;first&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span>&gt;</span>其他组件<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;second&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>调用<code>my-component</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">slot</span>=<span class="string">&quot;second&quot;</span>&gt;</span>xxxxxxx<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">slot</span>=<span class="string">&quot;first&quot;</span>&gt;</span>aaabbbccc<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h2><ul>
<li><strong>父子组件之间通信</strong><blockquote>
<p>父子组件：在组件组合中，包含子组件的组件为父组件，被包含在父组件中的组件称子组件。<br>属性绑定：通过在组件标签中设置属性值，将数据从<strong>父组件&#x3D;&gt;子组件</strong>。<br>事件绑定：通过在组件中触发事件，将数据从<strong>子组件&#x3D;&gt;父组件</strong>。<br>获取组件实例：通过<code>this.selectComponent()</code>获取子组件实例对象</p>
</blockquote>
</li>
<li><strong>属性绑定</strong> <em>父组件&#x3D;&gt;子组件</em><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">message</span>=<span class="string">&quot;Hello, ChatGPT!&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 子组件<span class="title class_">Js</span> --&gt;</span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>父组件通过在 <code>&lt;child-component&gt;</code> 标签中设置 <code>message</code> 属性的值来传递数据，子组件通过 <code>properties</code> 属性来声明接收 <code>message</code> 属性，并在其中设置默认值。<br><em>子组件在父组件的数据传递 类似于 组件在页面中的使用。</em></p>
</blockquote>
</li>
<li><strong>事件绑定</strong> <em>子组件&#x3D;&gt;父组件</em> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 子组件html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;onButtonClick&quot;</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 子组件<span class="title class_">Js</span> --&gt;</span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">onButtonClick</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;customEvent&#x27;</span>, &#123; <span class="attr">message</span>: <span class="string">&#x27;Hello, ChatGPT!&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">child-component</span> <span class="attr">bind:customEvent</span>=<span class="string">&quot;onCustomEvent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;!-- 父组件<span class="title class_">Js</span> --&gt;</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">onCustomEvent</span>: <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">detail</span>.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>子组件通过在 <code>&lt;button&gt;</code> 节点上绑定 <code>bindtap</code> 事件，并在事件处理函数中使用 <code>triggerEvent</code> 方法触发 <code>customEvent</code> 自定义事件，并传递了一个包含 <code>message</code> 属性的对象。<br>父组件在 <code>&lt;child-component&gt;</code> 标签上绑定 <code>bind:customEvent</code> 事件，并在事件处理函数中通过 <code>event.detail</code> 获取传递过来的数据。<br>步骤：</p>
<ol>
<li>父组件Js中，定义一个接收处理函数<code>onCustomEvent(e)</code>自定义事件传递给子组件</li>
<li>父组件html中，通过自定义事件引用<code>onCustomEvent</code>，用bind传给子组件事件<code>customEvent</code></li>
<li>子组件Js中，调用<code>this.triggerEvent(&#39;事件CustomEvent&#39;,&#123;传递的参数对象&#125;)</code></li>
<li>父组件Js中，通过形参获取数据对象<code>e.detail</code><br><em>简单来说就是子组件可以通过<code>this.triggerEvent</code>主动触发事件A并传递参数，只要使父组件绑定事件A就可以实现父组件接收子组件参数数据</em></li>
</ol>
</blockquote>
</li>
<li><strong>获取组件实例</strong><blockquote>
<p>父组件里调用<code>this.selectComponent(id或class选择器)</code> 获取子组件实例对象</p>
<ol>
<li>父组件html中，绑定事件处理函数<code>getChild()</code>; 子组件html中，选择器&#96;class&#x3D;”cA” id&#x3D;”iA”</li>
<li>父组件Js中，<code>getChild()&#123; const child = this.selectComponent(&#39;选择器&#39;);... &#125;</code></li>
</ol>
</blockquote>
</li>
</ul>
<h2 id="behaviors组件代码共享"><a href="#behaviors组件代码共享" class="headerlink" title="behaviors组件代码共享"></a>behaviors组件代码共享</h2><blockquote>
<p>behaviors，类似<code>Vue.js</code>中的“mixins”</p>
</blockquote>
<ul>
<li>behavior工作方式<blockquote>
<p>定义一组属性、数据、方法和生命周期函数，并被多个组件复用，从而实现代码的复用和模块化。一个 <code>behavior</code> 模块是一个包含属性、数据、方法和生命周期函数的 JavaScript 对象。<br>一个组件可以引用多个behavior，behavior也可引用其他behavior</p>
</blockquote>
</li>
<li>创建behaviors<blockquote>
<p>根目录下&gt;behaviors文件夹&gt;my-behavior.js</p>
</blockquote>
</li>
<li>用<code>Behavior(Object object)</code>方法定义实例对象，通过<code>module.exports</code>共享导出<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Behavior</span>(&#123;</span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">myProperty</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">myData</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">myMethod</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;This is my behavior method.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">    <span class="attr">created</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;My behavior created.&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">attached</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;My behavior attached.&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">detached</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;My behavior detached.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>导入使用behavior<blockquote>
<p>组件Js中，使用<code>require()</code>方法导入实例对象，<strong>挂载后</strong>允许访问behavior中数据和方法。<br><code>const myBehavior = require(&quot;../../behaviors/my-behavior&quot;)</code>  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">behaviors</span>: [myBehavior],</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="attr">doSomething</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Do something in my component.&#x27;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">myMethod</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>behavior可用节点<br>![[Pasted image 20230804020128.png|600]]</li>
<li>同名冲突字段的覆盖和组合规则<blockquote>
<p>组件和引用的behavior可以包含同名字段。处理规则按3中情况<br>同名数据字段data<br>同名属性properties或方法method<br>同名生命周期函数<br><em>具体参考微信小程序手册</em></p>
</blockquote>
</li>
</ul>
<h2 id="vant组件库"><a href="#vant组件库" class="headerlink" title="vant组件库"></a>vant组件库</h2><blockquote>
<p>一套小程序UI组件库</p>
</blockquote>
<ul>
<li>确保电脑中有npm环境，<code>在项目的资源管理器中右键打开黑窗口，然后输入命令&quot;npm init -y&quot;</code></li>
<li>安装vant<code>npm i @vant/weapp@版本号 -S --production</code></li>
<li>菜单栏 &gt; 工具 &gt; 构建npm</li>
<li>修改<code>app.json</code> 去除<code>&quot;style&quot;: &quot;v2</code> 防止样式冲突</li>
<li>在全局或局部json中添加 <em>以button为例，具体参考vant手册</em><blockquote>
<p><code>&quot;usingComponents&quot;: &#123;&quot;van-button&quot;: &quot;@vant/weapp/button/index&quot;&#125;</code></p>
</blockquote>
</li>
</ul>
<h4 id="CSS定制vant主题样式"><a href="#CSS定制vant主题样式" class="headerlink" title="CSS定制vant主题样式"></a>CSS定制vant主题样式</h4><ul>
<li>定义样式变量：变量前加<code>--</code> 如<code>--var1</code> </li>
<li>使用样式变量：利用<code>var()</code>引用变量 如<code>var(var1)</code></li>
<li>作用域：全局生效（<code>app.wxss</code>的<code>page&#123;...&#125;</code> ）<em>每个页面的根节点为page</em></li>
<li>vant的样式变量 <a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less">配置文件</a></li>
</ul>
<h2 id="API的promise化"><a href="#API的promise化" class="headerlink" title="API的promise化"></a>API的promise化</h2><blockquote>
<p>小程序官方提供的异步API基于回调函数实现，容易造成”回调地狱“（可读，维护性差）<br><strong>Promise化</strong>：通过额外配置，把基于回调的异步API &#x3D;&gt; 基于Promise的异步API</p>
</blockquote>
<ul>
<li>API的Promise化的环境<blockquote>
<p>小程序根目录终端<code>npm install --save miniprogram-api-promise@1.0.4</code><br>删除原<code>miniprogram_npm</code> 工具 &gt; 构建</p>
</blockquote>
</li>
<li>API的Promise的实现<blockquote>
<p><code>promisifyAll</code> 函数的作用是将一个对象中的所有异步函数（以 <code>Async</code> 结尾）转换成 Promise 形式的函数。<br><em>（该方法需要导入<code>import &#123; promiseAll &#125; from &#39;miniprogram-api-promise&#39;</code>)</em><br>使用方法：<br><code>const wxp=wx.p=&#123;&#125;</code><br><code>promisifyAll(wx，wxp)</code> <br>promisifyAll把顶级对象wx promise化到 空对象wxp；而wxp和wx.p指向同一个对象，相当于Promise化到wx.p自身一部分上。后续调用可以使用wx.p直接进行</p>
</blockquote>
</li>
<li>调用Promise后的异步API<blockquote>
<p>以获取request信息为例：原：<code>wx.request(&#123;...&#125;)</code> 改：<code>wx.p.request(&#123;...&#125;)</code><br>返回值为一个Promise对象。<br><code>async</code> 关键字用于声明一个异步函数，异步函数在执行时会返回一个 Promise 对象。在异步函数中，可以使用 <code>await</code> 关键字来等待一个 Promise 对象的完成，并获取其结果。<br><em>如果只需要返回Promise对象中的某部分如data对象，可以把const res 改为 const {data:res} 最终打印出的res就会是返回Promise对象的data部分</em></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">getInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> res = <span class="keyword">await</span> wx.<span class="property">p</span>.<span class="title function_">request</span>(&#123;</span><br><span class="line">		<span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">		<span class="attr">url</span>:<span class="string">&#x27;xxxxx.xxx&#x27;</span>,</span><br><span class="line">		<span class="attr">data</span>:&#123;</span><br><span class="line">			<span class="attr">name</span>:<span class="string">&quot;zx&quot;</span>,</span><br><span class="line">			<span class="attr">age</span>:<span class="string">&quot;20&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="MobX全局数据共享"><a href="#MobX全局数据共享" class="headerlink" title="MobX全局数据共享"></a>MobX全局数据共享</h2><blockquote>
<p>用于解决组件间数据共享问题。数据共享方案: Vuex,Redux,MobX等<br>![[Pasted image 20230806002141.png|500]]</p>
</blockquote>
<ul>
<li>安装MobX相关包<blockquote>
<p><code>npm install --save mobx-miniprogram@4.13.2 mobx-miniprogram-bindings@1.2.1</code><br>删除miniprogram_npm文件夹，构建</p>
</blockquote>
</li>
<li>小程序的全局数据共享方案<blockquote>
<p><code>mobx-miniprogram</code>创建Store实例对象<br><code>mobx-miniprogram-bindings</code>把Store中的共享数据和方法，绑定到组件或页面中。</p>
</blockquote>
</li>
<li>创建Mobx的store成员<blockquote>
<p>根目录创建文件夹store &gt; <code>store.js</code> 创建实例对象<br><code>observable</code> 是 Mobx 库中的一个函数或装饰器，用于将普通的 JavaScript 对象或类属性转换为可观察对象。<br><code>action</code> 是一个用于对状态进行修改的函数或方法修饰器。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//store.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;observable,action&#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">observable</span>(&#123;</span><br><span class="line">  <span class="comment">//数据字段</span></span><br><span class="line">  <span class="attr">numA</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">numB</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="comment">//方法字段 计算属性（只读）</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">sum</span>()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">numA</span>+<span class="variable language_">this</span>.<span class="property">numB</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//action方法字段 修改数据</span></span><br><span class="line">    <span class="attr">updataNum1</span>: <span class="title function_">action</span>(<span class="keyword">function</span>(<span class="params">step</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">numA</span> += step</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">updataNum2</span>: <span class="title function_">action</span>(<span class="keyword">function</span>(<span class="params">step</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">numB</span> += step</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>store成员绑定到页面中<blockquote>
<p>导入<code>createStoreBindings</code>方法和<code>store</code>实例<br><code>onLoad</code>周期创建<code>createStoreBindings(本页面对象this,参数数据对象)</code>,<br><em>this.storeBindings命名指向该对象</em><br><code>onUnload</code>周期清理<code>this.storeBindings.destroyStoreBindings()</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//页面(组件).js</span></span><br><span class="line"><span class="keyword">import</span> &#123;createStoreBindings&#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;store&#125; <span class="keyword">from</span> <span class="string">&#x27;../../store/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"> <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storeBindings</span> = <span class="title function_">createStoreBindings</span>(<span class="variable language_">this</span>,&#123;</span><br><span class="line">      store,</span><br><span class="line">      <span class="attr">fields</span>: [<span class="string">&#x27;numA&#x27;</span>,<span class="string">&#x27;numB&#x27;</span>,<span class="string">&#x27;sum&#x27;</span>],<span class="comment">//要绑定的字段数据</span></span><br><span class="line">      <span class="attr">actions</span>: [<span class="string">&#x27;updataNum1&#x27;</span>]<span class="comment">//要绑定的方法</span></span><br><span class="line">    &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storeBindings</span>.<span class="title function_">destroyBindings</span>();</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>页面中使用Store成员<blockquote>
<p>直接通过Mustache语法使用field中的变量<br>组件通过定义属性<code>data-var1=&quot;&#123;&#123;???&#125;&#125;&quot;</code>，在该组件触发事件绑定时，事件处理函数通过参数target&gt;dataset&gt;var1<em>具体可以通过console.log(e)查询</em></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;numA&#125;&#125; + &#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler1&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;&#123;&#123;1&#125;&#125;&quot;</span>&gt;</span>numA+1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler1&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;&#123;&#123;-1&#125;&#125;&quot;</span>&gt;</span>numA-1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">btnHandler1</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">//console.log(e),</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">updataNum1</span>(e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">step</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>store成员绑定到组件中<blockquote>
<p>导入<code>createStoreBehavior</code>方法和<code>store</code>实例<br>定义一个数组<code>behaviors:[createStoreBehavior] 定义page对象</code>storeBinds:{store,fields:{…},actions:{…}}</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;storeBindingsBehavior&#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;store&#125; <span class="keyword">from</span> <span class="string">&#x27;../../store/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">behaviors</span>: [storeBindingsBehavior],</span><br><span class="line">  <span class="attr">storeBindings</span>:&#123;</span><br><span class="line">    store,</span><br><span class="line">    <span class="attr">fields</span>:&#123;</span><br><span class="line">      <span class="attr">numA</span>:<span class="string">&#x27;numA&#x27;</span>,</span><br><span class="line">      <span class="attr">numB</span>:<span class="string">&#x27;numB&#x27;</span>,</span><br><span class="line">      <span class="attr">sum</span>:<span class="string">&quot;sum&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>:&#123;</span><br><span class="line">      <span class="attr">updataNum2</span>:<span class="string">&#x27;updataNum2&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure></li>
<li>组件中使用store成员<blockquote>
<p>见页面，同上</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;numA&#125;&#125; + &#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler2&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;&#123;&#123;1&#125;&#125;&quot;</span>&gt;</span>numB+1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHandler2&quot;</span> <span class="attr">data-step</span>=<span class="string">&quot;&#123;&#123;-1&#125;&#125;&quot;</span>&gt;</span>numB-1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Components</span>(&#123;</span><br><span class="line">	<span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">btnHandler2</span>(<span class="params">e</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">updataNum2</span>(e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">step</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="分包"><a href="#分包" class="headerlink" title="分包"></a>分包</h2><blockquote>
<p>可以优化小程序首次启动的下载事件；多团队开打更好的解耦协作<br>主包：启动页面，TabBar页面，所有分包用到的公共资源<br>分包：只包含和当前分包有关的页面和私有资源。<br>小程序<strong>启动时，默认下载主包并启动主包内页面</strong><br>进入<strong>分包某页面时，客户端下载对应分包</strong>，下载完成后再进行展示<br><strong>体积限制</strong>：整个小程序的所有包大小不超过16M；单个包的大小不超过2M</p>
</blockquote>
<ul>
<li>使用分包<blockquote>
<p><code>app.json</code>中<br><code>&quot;pages&quot;:[主包所有页面路径]</code>，<br><code>&quot;subpackages:[&#123;&quot;root&quot;:&quot;分包1根目录&quot;,&quot;pages&quot;:[分包1页面路径]&#125;,&#123;&quot;root&quot;:&quot;分包2根目录&quot;,&quot;name&quot;:&quot;分包别名&quot;,&quot;pages&quot;:[分包2页面路径]&#125;]&quot;</code></p>
</blockquote>
</li>
<li>引用分包<blockquote>
<p>主包无法引用分包私有资源，分包之间无法引用私有资源；私包可以使用主包公共资源</p>
</blockquote>
</li>
<li>独立分包<blockquote>
<p>分包的一种，但是可以独立于主包和其他分包单独运行，无需下载主包。<br>独立分包的页面启动速度快。<br><strong>配置独立分包</strong>，subpackages下root等统计设置<code>independent:true</code><br><code>app.json</code>&gt;<code>subpackages</code>&gt;<code>&#123;&quot;root&quot;...&quot;pages&quot;...,&quot;independent&quot;:true&#125;</code><br>独立分包相互隔绝，<strong>独立分包不可以引用主包公共资源</strong></p>
</blockquote>
</li>
<li>分包预下载<blockquote>
<p>预下载的分包页面启动速度更快。<br><strong>配置分包预下载</strong>：在<code>app.json</code>设置<code>preloadRule</code>节点<br><code>preloadRule:&#123;&quot;触发预下载的页面路径&quot;:&#123;&quot;network&quot;:&quot;网络模式&quot;,&quot;packages&quot;:[&quot;分包&quot;]&#125;&#125;</code><br>其中network可选”all”不限网络，”wifi”仅wifi环境<br><strong>下载限制</strong>：<em>同一个包的页面</em>共享<em>总的分包预下载限额为2M</em></p>
</blockquote>
</li>
</ul>
<h2 id="案例实操3"><a href="#案例实操3" class="headerlink" title="案例实操3"></a>案例实操3</h2><h4 id="自定义TabBar"><a href="#自定义TabBar" class="headerlink" title="自定义TabBar"></a>自定义TabBar</h4><ul>
<li>配置信息<blockquote>
<p><code>app.json</code>的tabBar项<code>&quot;custom&quot;:true</code>。<em>届时会覆盖<code>&quot;list&quot;</code>字段，但为了兼容版本不删除。</em></p>
</blockquote>
</li>
<li>添加tabBar组件<blockquote>
<p>新建文件夹<code>custom-tab-bar</code>,并在文件夹下创建一个component组件。</p>
</blockquote>
</li>
<li>编写tabBar组件<blockquote>
<p><code>app.json</code>引用组件。组件的wxml中编写组件，并修改对应js文件。<a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant-weapp/#/tabbar">vant官方参考</a></p>
</blockquote>
</li>
<li>编写tabBar样式<blockquote>
<p>关键点：调试器的容器选择器，组件css样式变量，js中options共享styleIsolation</p>
</blockquote>
</li>
<li>tabBar的徽标<blockquote>
<p>组件中info属性，*<code>0 空格 &#39;&#39;</code>都不渲染*<br>关键点：引入mobx成员，挂载behaviors数组，数据绑定，监听某个变量变化处理info</p>
</blockquote>
</li>
<li>tabBar页面切换<blockquote>
<p>在组件的js文件中，监听事件处理函数调用<code>wx.switchTab</code>.<br>解决索引不符合问题：<strong>把索引<code>data</code>:active放在<code>store</code>公共区域。</strong><br><code>store.js</code><strong>定义</strong>：数据字段增加变量<code>activeTabBarIndex:0</code>以及更新方法<code>updataActiveTabBar:action(function(index)&#123;this.activeTabBarIndex = index&#125;)</code><br>tabBar组件页面js文件<code>storeBindings</code>节点的<code>fields</code>和<code>actions</code><strong>挂载</strong>增加的变量和方法，在<code>method</code>节点<strong>引用</strong>挂载后的名称，使得<code>onChange(event)</code>的参数索引event.detail能够传入store公共区域处理</p>
</blockquote>
</li>
</ul>
<h2 id="HBuilder联动"><a href="#HBuilder联动" class="headerlink" title="HBuilder联动"></a>HBuilder联动</h2><ul>
<li>下载HBuilder，运行&gt;运行设置&gt;连接到小程序所在文件位置</li>
<li>打开微信开发者工具，设置&gt;安全&gt;打开服务端口</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://yu-ring.github.io">YuRing</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://yu-ring.github.io/2023/09/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">https://yu-ring.github.io/2023/09/13/微信小程序/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://pic-bed-e5v.pages.dev/img/神州折剑10.JPG" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/13/Git/" title="Git基础"><img class="cover" src="https://pic-bed-e5v.pages.dev/img/神州折剑16.JPG" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Git基础</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/22/5.0-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" title="背包问题导论"><img class="cover" src="https://pic-bed-e5v.pages.dev/img/神州折剑08.JPG" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">背包问题导论</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pic-bed-e5v.pages.dev/img/头像/Mimikyu.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">YuRing</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Yu-Ring"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Yu-Ring" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1807169624@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%9E%84%E6%88%90"><span class="toc-number">1.</span> <span class="toc-text">项目构成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pages%E6%9E%84%E6%88%90"><span class="toc-number">1.0.1.</span> <span class="toc-text">pages构成</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BF%E4%B8%BB%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">宿主环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WXML%E8%AF%AD%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">WXML语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">4.1.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">4.2.</span> <span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">4.3.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">4.4.</span> <span class="toc-text">列表渲染</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WXSS%E8%AF%AD%E6%B3%95"><span class="toc-number">5.</span> <span class="toc-text">WXSS语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%95%BF%E5%BA%A6%E5%8D%95%E4%BD%8Drpx"><span class="toc-number">5.1.</span> <span class="toc-text">小程序长度单位rpx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E5%AF%BC%E5%85%A5"><span class="toc-number">5.2.</span> <span class="toc-text">样式导入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E4%B8%8E%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">全局与页面配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E4%B8%8E%E5%B1%80%E9%83%A8%E6%A0%B7%E5%BC%8F"><span class="toc-number">6.1.</span> <span class="toc-text">全局样式与局部样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-app-json"><span class="toc-number">6.2.</span> <span class="toc-text">全局配置 app.json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pages-%E9%A1%B5%E9%9D%A2%E8%B7%AF%E5%BE%84"><span class="toc-number">6.2.1.</span> <span class="toc-text">pages 页面路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#window-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%AA%97%E5%8F%A3%E5%A4%96%E8%A7%82"><span class="toc-number">6.2.2.</span> <span class="toc-text">window 小程序窗口外观</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabBar-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%95%E9%83%A8tabBar%E6%95%88%E6%9E%9C"><span class="toc-number">6.2.3.</span> <span class="toc-text">tabBar 小程序底部tabBar效果</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%BC%94%E7%A4%BA"><span class="toc-number">6.2.3.1.</span> <span class="toc-text">具体演示</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#style-%E6%98%AF%E5%90%A6%E5%90%AF%E7%94%A8%E6%96%B0%E7%89%88%E7%BB%84%E4%BB%B6%E6%95%88%E6%9E%9C"><span class="toc-number">6.2.4.</span> <span class="toc-text">style 是否启用新版组件效果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE-json"><span class="toc-number">6.3.</span> <span class="toc-text">页面配置 ???.json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%BC%94%E7%A4%BA-1"><span class="toc-number">6.3.1.</span> <span class="toc-text">具体演示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82"><span class="toc-number">7.</span> <span class="toc-text">数据请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%90%88%E6%B3%95%E5%9F%9F%E5%90%8D"><span class="toc-number">7.0.1.</span> <span class="toc-text">配置合法域名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E8%B5%B7GET%E8%AF%B7%E6%B1%82"><span class="toc-number">7.0.2.</span> <span class="toc-text">发起GET请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E8%B5%B7POST%E8%AF%B7%E6%B1%82"><span class="toc-number">7.0.3.</span> <span class="toc-text">发起POST请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E9%A1%B5%E9%9D%A2%E6%97%B6%E8%AF%B7%E6%B1%82"><span class="toc-number">7.0.4.</span> <span class="toc-text">加载页面时请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%B3%E8%BF%87reques%E5%90%88%E6%B3%95%E5%9F%9F%E5%90%8D%E6%A0%A1%E9%AA%8C"><span class="toc-number">7.0.5.</span> <span class="toc-text">跳过reques合法域名校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">7.0.6.</span> <span class="toc-text">关于回调函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">7.0.7.</span> <span class="toc-text"></span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%90%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">8.</span> <span class="toc-text">运营数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%93%8D1"><span class="toc-number">9.</span> <span class="toc-text">案例实操1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E9%83%A8%E5%88%86"><span class="toc-number">9.0.1.</span> <span class="toc-text">准备部分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%AE%9E%E6%93%8D"><span class="toc-number">9.0.2.</span> <span class="toc-text">轮播图实操</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-number">9.0.2.1.</span> <span class="toc-text">步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">9.0.2.2.</span> <span class="toc-text">代码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E5%AE%9E%E6%93%8D"><span class="toc-number">9.0.3.</span> <span class="toc-text">导航实操</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA"><span class="toc-number">9.0.3.1.</span> <span class="toc-text">页面导航</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">9.0.3.2.</span> <span class="toc-text">导航传参</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E6%8B%89%E4%B8%8E%E4%B8%8B%E6%8B%89"><span class="toc-number">9.0.4.</span> <span class="toc-text">上拉与下拉</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">9.0.4.1.</span> <span class="toc-text">下拉刷新</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95"><span class="toc-number">9.0.4.2.</span> <span class="toc-text">上拉触底</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">10.</span> <span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WXS%E8%84%9A%E6%9C%AC"><span class="toc-number">11.</span> <span class="toc-text">WXS脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#WXS%E6%A6%82%E5%BF%B5"><span class="toc-number">11.0.1.</span> <span class="toc-text">WXS概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WXS-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">11.0.2.</span> <span class="toc-text">WXS 基本语法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%93%8D2"><span class="toc-number">12.</span> <span class="toc-text">案例实操2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%AF%B7%E6%B1%82"><span class="toc-number">12.0.1.</span> <span class="toc-text">动态请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD"><span class="toc-number">12.0.2.</span> <span class="toc-text">页面加载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WXS%E5%A4%84%E7%90%86%E6%A0%BC%E5%BC%8F-%E6%89%8B%E6%9C%BA%E5%8F%B7"><span class="toc-number">12.0.3.</span> <span class="toc-text">WXS处理格式 手机号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">13.</span> <span class="toc-text">自定义组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">14.</span> <span class="toc-text">组件生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%8F%92%E6%A7%BD"><span class="toc-number">15.</span> <span class="toc-text">自定义组件插槽</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">16.</span> <span class="toc-text">组件通信</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#behaviors%E7%BB%84%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%85%B1%E4%BA%AB"><span class="toc-number">17.</span> <span class="toc-text">behaviors组件代码共享</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vant%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">18.</span> <span class="toc-text">vant组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS%E5%AE%9A%E5%88%B6vant%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F"><span class="toc-number">18.0.1.</span> <span class="toc-text">CSS定制vant主题样式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API%E7%9A%84promise%E5%8C%96"><span class="toc-number">19.</span> <span class="toc-text">API的promise化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MobX%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-number">20.</span> <span class="toc-text">MobX全局数据共享</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%85"><span class="toc-number">21.</span> <span class="toc-text">分包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%93%8D3"><span class="toc-number">22.</span> <span class="toc-text">案例实操3</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89TabBar"><span class="toc-number">22.0.1.</span> <span class="toc-text">自定义TabBar</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HBuilder%E8%81%94%E5%8A%A8"><span class="toc-number">23.</span> <span class="toc-text">HBuilder联动</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/28/WEB%E5%BC%80%E5%8F%91-%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/" title="JavaWeb开发-项目-tlias笔记"><img src="https://pic-bed-e5v.pages.dev/img/神州折剑16.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaWeb开发-项目-tlias笔记"/></a><div class="content"><a class="title" href="/2023/09/28/WEB%E5%BC%80%E5%8F%91-%E9%A1%B9%E7%9B%AE%E6%A1%88%E4%BE%8B/" title="JavaWeb开发-项目-tlias笔记">JavaWeb开发-项目-tlias笔记</a><time datetime="2023-09-27T17:49:00.000Z" title="Created 2023-09-28 01:49:00">2023-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/13/Git/" title="Git基础"><img src="https://pic-bed-e5v.pages.dev/img/神州折剑16.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git基础"/></a><div class="content"><a class="title" href="/2023/09/13/Git/" title="Git基础">Git基础</a><time datetime="2023-09-13T02:44:00.000Z" title="Created 2023-09-13 10:44:00">2023-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序"><img src="https://pic-bed-e5v.pages.dev/img/神州折剑10.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微信小程序"/></a><div class="content"><a class="title" href="/2023/09/13/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="微信小程序">微信小程序</a><time datetime="2023-09-13T02:44:00.000Z" title="Created 2023-09-13 10:44:00">2023-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/22/5.0-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" title="背包问题导论"><img src="https://pic-bed-e5v.pages.dev/img/神州折剑08.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="背包问题导论"/></a><div class="content"><a class="title" href="/2023/03/22/5.0-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" title="背包问题导论">背包问题导论</a><time datetime="2023-03-22T12:00:00.000Z" title="Created 2023-03-22 20:00:00">2023-03-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/22/5.1-01%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" title="01背包问题"><img src="https://pic-bed-e5v.pages.dev/img/神州折剑09.JPG" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="01背包问题"/></a><div class="content"><a class="title" href="/2023/03/22/5.1-01%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" title="01背包问题">01背包问题</a><time datetime="2023-03-22T12:00:00.000Z" title="Created 2023-03-22 20:00:00">2023-03-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://pic-bed-e5v.pages.dev/img/神州折剑10.JPG')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By YuRing</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">我又回到了洄游之中</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="头发-1,头发-1,头发-1,头发-1,头发-1024" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>